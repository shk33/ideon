<h2>
  <%= @note.title %>
</h2>

<strong>Body:</strong>
<div class="well">
  <%= @note.body %>
</div>

<p>
  <strong>Favorite:</strong>
  <%= fa_icon(icon(@note), text: @note.favorite.to_s) %>
</p>

<p>
  <strong>Status:</strong>
  <%= @note.status %>
</p>

<p>
  <strong>Elementos de la lista</strong>
  <ul>
    <% @note.checklist_items.each do |checklist_item| %>
        <li>
          <%= checklist_item.description %>
          <%= fa_icon(checklist_item.fa_checked) %>
          <%= link_to fa_icon('trash-o', text: 'Eliminar item'), [checklist_item.note, checklist_item], method: :delete, data: { confirm: 'EstÃ¡s seguro?' } %>
        </li>
    <% end %>
  </ul>
  <%= form_for([@note, @note.checklist_items.build], html: { class: 'form-inline' }) do |f| %>
      <div class="form-group">
        <%= f.text_field :description, placeholder: 'Darle de comer al perro', class: 'form-control' %>
      </div>
      <div class="checkbox">
        <%= label_tag do %>
          <%= f.check_box :checked %>
          Finalizada
        <% end %>
      </div>
      <%= f.submit 'Crear', class: 'btn btn-success' %>
    </p>
  <% end %>
</p>
<p>
  <strong>Notas Hijas:</strong>
  <%= link_to 'Agregar', new_child_note_path(note_id: @note.id), class: 'btn btn-success' %>
  <ul>
    <% @note.child_notes.each do |child_note| %>
      <li>
        <%= link_to(
            child_note.title,
            "##{child_note.id}-#{child_note.title.parameterize}",
            data: {
              toggle: "modal",
              target: "##{child_note.id}-#{child_note.title.parameterize}",
            }
          ) %> - <%= link_to fa_icon('pencil'), edit_child_note_path(child_note) %> | <%= link_to fa_icon('trash'), child_note_path(child_note), method: :delete %>
      </li>
      <%= render "modal", member: child_note %>
    <% end %>
  </ul>
</p>

<p>
  <strong>Archivos adjuntos</strong>
  <br />
  <% @note.assets.each do |asset| %>
    <%= image_tag asset.file.url, height: '80px' %>
    <%= link_to fa_icon('trash-o', text: 'Eliminar archivo'), delete_asset_note_path(@note, asset_id: asset.id), method: :put, data: { confirm: 'Estas seguro?' } %>
    <%= link_to fa_icon('download', text: 'Descargar'), asset.file.url(:original, false) %>
    <br>
  <% end %>
</p>

<%= link_to 'Editar', edit_note_path(@note), class: 'btn btn-info' %>
<%= link_to 'Todas las notas', notes_path, class: 'btn btn-primary' %>
